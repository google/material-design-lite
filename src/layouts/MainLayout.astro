---
import HeadCommon from "../components/HeadCommon.astro";
import HeadSEO from "../components/HeadSEO.astro";
import Header from "../components/Header/Header.astro";
import PageContent from "../components/PageContent/PageContent.astro";
import LeftSidebar from "../components/LeftSidebar/LeftSidebar.astro";
import RightSidebar from "../components/RightSidebar/RightSidebar.astro";
import * as CONFIG from "../config";
import "../styles/main.css";

const { content = {} } = Astro.props;
const canonicalURL = new URL(Astro.url.pathname, Astro.site);
const currentPage = Astro.url.pathname;
---

<html dir={content.dir ?? "ltr"} lang={content.lang ?? "en-us"} class="initial">
	<head>
		<HeadCommon />
		<HeadSEO {content} canonicalURL={canonicalURL} />
		<title>
			{
				content.title
					? `${content.title} ðŸŽ¨ ${CONFIG.SITE.title}`
					: CONFIG.SITE.title
			}
		</title>
	</head>

	<body>
		<Header {currentPage} />
		<main class="layout">
			<aside id="grid-left" class="grid-sidebar" title="Site Navigation">
				<LeftSidebar {currentPage} />
			</aside>
			<div id="grid-main">
				<PageContent {content}>
					<slot />
				</PageContent>
			</div>
			<aside
				id="grid-right"
				class="grid-sidebar"
				title="Table of Contents"
			>
				<RightSidebar {content} />
			</aside>
		</main>
		<script
			type="module"
			src="https://rodydavis.github.io/material-theme-control/material-theme-control.es.js"
		></script>
	</body>
</html>
