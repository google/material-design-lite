<!doctype html>
<html lang="">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Material Design Lite customizer</title>

  <link href="//fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en" rel='stylesheet'>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
    rel="stylesheet">

  <link rel="stylesheet" href="{{page.include_prefix}}/material.min.css" id="main-stylesheet">
  <link rel="stylesheet" href="{{page.include_prefix}}/assets/customizer.css">
  <!-- <script src="{{page.include_prefix}}/assets/customizer.js"></script> -->
</head>
<body class="mdl-gen mdl-color--grey-200" id="mdl-gen-body">
  <style>
    #wheel .selector {
      opacity: 0;
      transition: opacity 0.4s cubic-bezier(0.4, 0.0, 1, 1);
      fill: #BDBDBD;
    }
    #wheel .selected .selector {
      opacity: 1;
    }
    #wheel .label {
      text-anchor: middle;
      opacity: 0;
      transition: opacity 0.4s cubic-bezier(0.4, 0.0, 1, 1);
      fill: white;
      font-size: 24px;
    }
    #wheel .selected--0 .label--0,
    #wheel .selected--1 .label--1 {
      opacity: 1;
    }

  </style>
  <svg id="wheel" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <defs>
      <filter id="drop-shadow">
        <feOffset in="SourceAlpha" dx="-2" dy="-2" result="alpha1" />
        <feOffset in="SourceAlpha" dx=" 2" dy="-2" result="alpha2" />
        <feOffset in="SourceAlpha" dx="-2" dy=" 2" result="alpha3" />
        <feOffset in="SourceAlpha" dx=" 2" dy=" 2" result="alpha4" />
        <feMerge>
          <feMergeNode in="alpha1" />
          <feMergeNode in="alpha2" />
          <feMergeNode in="alpha3" />
          <feMergeNode in="alpha4" />
        </feMerge>
        <feGaussianBlur in="allAlpha" stdDeviation="3.2" result="blurred"/>
        <feFlood flood-color="rgba(0,0,0,0.5)"/>
        <feComposite in2="blurred" operator="in"/>
        <feMerge>
          <feMergeNode />
          <feMergeNode in="SourceGraphic" />
        </feMerge>
      </filter>
    </defs>
    <g></g>
  </svg>
  <script>
    (function() {
      var isIE = window.navigator.msPointerEnabled;
      var wheel = document.querySelector('#wheel');
      var mainG = document.querySelector('#wheel g');
      var config = {
        width: 650, // width of the SVG panel
        height: 650, // height of the SVG panel
        r: 250, // radius of the wheel
        r_i: 100, // radius of the inner hole
        h_d: 40, // height of the dark section
        c: 40, // Distance(center of selector circle, border of wheel)
        m_r_s: 0.5, // Percent of available width to use as radius for selector circle
        alphaIncr: 0.005, // Value to add to alpha to make tiles overlap slightly
        colors: [ // colors ([light, dark]) of the wheel
          ['#00BCD4', '#00ACC1'], // Cyan  [-500, -600]
          ['#009688', '#00897B'], // Teal [-500, -600]
          ['#4CAF50', '#43A047'], // Green [-500, -600]
          ['#8BC34A', '#7CB342'], // Light Green [-500, -600]
          ['#CDDC39', '#C0CA33'], // Lime [-500, -600]
          ['#FFEB3B', '#FDD835'], // Yellow [-500, -600]
          ['#FFC107', '#FFB300'], // Amber [-500, -600]
          ['#FF9800', '#FB8C00'], // Orange [-500, -600]
          ['#795548', '#6D4C41'], // Brown [-500, -600]
          ['#607D8B', '#546E7A'], // Blue Grey [-500, -600]
          ['#9E9E9E', '#757575'], // Grey [-500, -600]
          ['#FF5722', '#F4511E'], // Deep Orange [-500, -600]
          ['#F44336', '#E53935'], // Red [-500, -600]
          ['#E91E63', '#D81B60'], // Pink [-500, -600]
          ['#9C27B0', '#8E24AA'], // Purple [-500, -600]
          ['#673AB7', '#5E35B1'], // Deep Purple [-500, -600]
          ['#3F51B5', '#3949AB'], // Indigo [-500, -600]
          ['#2196F3', '#1E88E5'], // Blue [-500, -600]
          ['#03A9F4', '#039BE5'], // Light Blue [-500, -600]
        ]
      }
      // Calculated values
      // Angle of each piece of the wheel
      config.alphaDeg = 360.0/config.colors.length;
      config.alphaRad = config.alphaDeg * Math.PI/180;
      // Radius of selector circle
      config.r_s = (config.c + config.r) * Math.sin(config.alphaRad/2) * config.m_r_s;
      // Angle of selector cone
      config.selectorAlphaRad = Math.atan(config.r_s / config.c)*2;
      // Center of selector circle
      config.c_x = (config.c + config.r) * Math.sin(config.alphaRad)/2;
      config.c_y = -(config.c + config.r) * (1 + Math.cos(config.alphaRad))/2;

      wheel.setAttribute('width', config.width);
      wheel.setAttribute('height', config.height);

      var svgNS = 'http://www.w3.org/2000/svg';
      var fieldTpl = document.createElementNS(svgNS, 'g');
      var polygons = document.createElementNS(svgNS, 'g')
      var lightField = document.createElementNS(svgNS, 'polygon');
      lightField.setAttribute('points', [
        [config.r_i * Math.sin(config.alphaRad+config.alphaIncr), -config.r_i * Math.cos(config.alphaRad+config.alphaIncr)].join(','),
        [config.r   * Math.sin(config.alphaRad+config.alphaIncr), -config.r   * Math.cos(config.alphaRad+config.alphaIncr)].join(','),
        [0, -config.r               ].join(','),
        [0, -(config.r_i+config.h_d)].join(','),
      ].join(' '));
      var darkField = document.createElementNS(svgNS, 'polygon');
      darkField.setAttribute('points', [
        [config.r_i                * Math.sin(config.alphaRad+config.alphaIncr), -config.r_i                * Math.cos(config.alphaRad+config.alphaIncr)].join(','),
        [(config.r_i + config.h_d) * Math.sin(config.alphaRad+config.alphaIncr), -(config.r_i + config.h_d) * Math.cos(config.alphaRad+config.alphaIncr)].join(','),
        [0, -(config.r_i + config.h_d)].join(','),
        [0, -config.r_i               ].join(','),
      ].join(' '));
      polygons.appendChild(lightField);
      polygons.appendChild(darkField);
      polygons.setAttribute('class', 'polygons');
      fieldTpl.appendChild(polygons);

      var selector = document.createElementNS(svgNS, 'path')
      selector.setAttribute('class', 'selector')
      selector.setAttribute('d',
        ' M ' + ( config.r   * Math.sin(config.alphaRad)/2) + ' ' + -(config.r * (1 + Math.cos(config.alphaRad))/2) +
        ' L ' + (config.c_x - config.r_s * Math.cos(config.alphaRad/2 - config.selectorAlphaRad/2)) + ' ' + (config.c_y - config.r_s * Math.sin(config.alphaRad/2 - config.selectorAlphaRad/2)) +
        ' A ' + config.r_s + ' ' + config.r_s + ' ' + config.alphaDeg + ' 1 1 ' + (config.c_x + config.r_s * Math.cos(config.alphaRad/2 + config.selectorAlphaRad/2)) + ' ' + (config.c_y + config.r_s * Math.sin(config.alphaRad/2 + config.selectorAlphaRad/2)) +
        ' z '
      );
      fieldTpl.appendChild(selector);

      config.colors.forEach(function(color, idx) {
        var field = fieldTpl.cloneNode(true);

        for(var i = 0; i < 2; i++) {
          var g = document.createElementNS(svgNS, 'g');
          var label = document.createElementNS(svgNS, 'text');
          label.setAttribute('class', 'label label--'+i);
          label.setAttribute('transform', 'rotate(' + (-config.alphaDeg*idx) + ')');
          label.setAttribute('dy', '0.5ex');
          label.textContent = '' + (i+1);
          g.appendChild(label);
          g.setAttribute('transform', 'translate(' + config.c_x + ',' + config.c_y + ')');
          field.appendChild(g);
        }

        field.querySelector('.polygons > *:nth-child(1)').style.fill = color[0];
        field.querySelector('.polygons > *:nth-child(2)').style.fill = color[1];
        field.querySelector('.polygons').addEventListener('click', fieldClicked);
        field.setAttribute('transform', 'rotate(' + config.alphaDeg*idx + ')');
        mainG.appendChild(field);
      });

      mainG.setAttribute('transform', 'translate(' + config.width/2 + ',' + config.height/2 +')');

      var numSelected = 0;

      function parentWrapper(p) {
          return p.parentElement || p.parentNode;
      }

      function fieldClicked(ev) {
        var g = parentWrapper(parentWrapper(ev.target));
        var parent = parentWrapper(g);
        if((g.getAttribute('class') || '').indexOf('selected') !== -1) {
          return;
        }

        if(numSelected === 2) {
          Array.prototype.forEach.call(mainG.childNodes, function(f) {
            f.setAttribute('class', '');
            f.querySelector('.polygons').setAttribute('filter', '')
          });
          numSelected = 0;
        }

        // Make the current polygon the last child of its parent
        // so shadows are visible.
        parent.removeChild(g);
        parent.appendChild(g);

        // We changed the DOM hierarchy, CSS animations might not show until
        // DOM has updated internally.
        window.requestAnimationFrame(function() {
          g.setAttribute('class', 'selected selected--'+this);
          // FIXME: Shadows in IE10 don't disappear, for now they are disabled
          if(!isIE) {
            g.querySelector('.polygons').setAttribute('filter', 'url(#drop-shadow)');
          }
        }.bind(numSelected));

        numSelected++;
      }
    })();
  </script>

  <script src="{{page.include_prefix}}material.min.js"></script>
</body>
</html>
