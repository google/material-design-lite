<!doctype html>
<html lang="">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Material Design Lite customizer</title>

  <link href="//fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en" rel='stylesheet'>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
    rel="stylesheet">

  <link rel="stylesheet" href="{{page.include_prefix}}/material.min.css" id="main-stylesheet">
  <link rel="stylesheet" href="{{page.include_prefix}}/assets/customizer.css">
  <!-- <script src="{{page.include_prefix}}/assets/customizer.js"></script> -->
</head>
<body class="mdl-gen mdl-color--grey-200" id="mdl-gen-body">
  <style>
    #wheel > g > g.selected {
      stroke: red;
    }
    #wheel .selector {
      fill: hsla(0, 0%, 0%, 1.0);
    }
  </style>
  <svg id="wheel" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g></g>
  </svg>
  <script>
    (function() {
      var wheel = document.querySelector('#wheel');
      var mainG = document.querySelector('#wheel g');
      var config = {
        width: 600, // width of the SVG panel
        height: 600, // height of the SVG panel
        r: 250, // radius of the wheel
        r_i: 100, // radius of the inner hole
        h_d: 50, // height of the dark section
        c: 280, // Distance(center of select circle, center of wheel)
        colors: [ // colors ([light, dark]) of the wheel
          ['hsla(  0, 100%, 50%, 1.0)', 'hsla(  0, 100%, 40%, 1.0)'],
          ['hsla( 18, 100%, 50%, 1.0)', 'hsla( 18, 100%, 40%, 1.0)'],
          ['hsla( 36, 100%, 50%, 1.0)', 'hsla( 36, 100%, 40%, 1.0)'],
          ['hsla( 54, 100%, 50%, 1.0)', 'hsla( 54, 100%, 40%, 1.0)'],
          ['hsla( 72, 100%, 50%, 1.0)', 'hsla( 72, 100%, 40%, 1.0)'],
          ['hsla( 90, 100%, 50%, 1.0)', 'hsla( 90, 100%, 40%, 1.0)'],
          ['hsla(108, 100%, 50%, 1.0)', 'hsla(108, 100%, 40%, 1.0)'],
          ['hsla(126, 100%, 50%, 1.0)', 'hsla(126, 100%, 40%, 1.0)'],
          ['hsla(144, 100%, 50%, 1.0)', 'hsla(144, 100%, 40%, 1.0)'],
          ['hsla(162, 100%, 50%, 1.0)', 'hsla(162, 100%, 40%, 1.0)'],
          ['hsla(180, 100%, 50%, 1.0)', 'hsla(180, 100%, 40%, 1.0)'],
          ['hsla(198, 100%, 50%, 1.0)', 'hsla(198, 100%, 40%, 1.0)'],
          ['hsla(216, 100%, 50%, 1.0)', 'hsla(216, 100%, 40%, 1.0)'],
          ['hsla(234, 100%, 50%, 1.0)', 'hsla(234, 100%, 40%, 1.0)'],
          ['hsla(252, 100%, 50%, 1.0)', 'hsla(252, 100%, 40%, 1.0)'],
          ['hsla(270, 100%, 50%, 1.0)', 'hsla(270, 100%, 40%, 1.0)'],
          ['hsla(288, 100%, 50%, 1.0)', 'hsla(288, 100%, 40%, 1.0)'],
          ['hsla(306, 100%, 50%, 1.0)', 'hsla(306, 100%, 40%, 1.0)'],
          ['hsla(324, 100%, 50%, 1.0)', 'hsla(324, 100%, 40%, 1.0)'],
          ['hsla(342, 100%, 50%, 1.0)', 'hsla(342, 100%, 40%, 1.0)'],
        ]
      }
      config.alphaDeg = 360.0/config.colors.length;
      config.alphaRad = config.alphaDeg * Math.PI/180;

      wheel.setAttribute('width', config.width);
      wheel.setAttribute('height', config.height);

      var svgNS = 'http://www.w3.org/2000/svg';
      var fieldTpl = document.createElementNS(svgNS, 'g');
      var lightField = document.createElementNS(svgNS, 'polygon');
      lightField.setAttribute('points', [
        [0, -(config.r_i+config.h_d)].join(','),
        [(config.r_i + config.h_d) * Math.sin(config.alphaRad), -(config.r_i + config.h_d) * Math.cos(config.alphaRad)].join(','),
        [config.r   * Math.sin(config.alphaRad), -config.r   * Math.cos(config.alphaRad)].join(','),
        [0, -config.r].join(','),
      ].join(' '));
      var darkField = document.createElementNS(svgNS, 'polygon');
      darkField.setAttribute('points', [
        [0, -config.r_i].join(','),
        [config.r_i * Math.sin(config.alphaRad), -config.r_i * Math.cos(config.alphaRad)].join(','),
        [(config.r_i + config.h_d) * Math.sin(config.alphaRad), -(config.r_i + config.h_d) * Math.cos(config.alphaRad)].join(','),
        [0, -(config.r_i + config.h_d)].join(','),
      ].join(' '));
      var circle = document.createElementNS(svgNS, 'circle');
      circle.className = 'selector';
      circle.setAttribute('cx', config.c * Math.sin(config.alphaRad/2));
      circle.setAttribute('cy', -config.c   * Math.cos(config.alphaRad/2));
      circle.setAttribute('r', config.c * Math.sin(config.alphaRad/2)/2);
      mainG.appendChild(circle);

      fieldTpl.appendChild(lightField);
      fieldTpl.appendChild(darkField);

      config.colors.forEach(function(color, idx) {
        var field = fieldTpl.cloneNode(true);
        field.querySelector(':nth-child(1)').style.fill = color[0];
        field.querySelector(':nth-child(2)').style.fill = color[1];
        field.addEventListener('click', fieldClicked);
        field.setAttribute('transform', 'rotate(' + config.alphaDeg*idx + ')');
        mainG.appendChild(field);
      });

      mainG.setAttribute('transform', 'translate(' + config.width/2 + ',' + config.height/2 +')');

      function fieldClicked(ev) {
        Array.prototype.forEach.call(mainG.childNodes, function(f) {
          if(f.getAttribute('class') == 'selector') {
            return;
          }
          f.setAttribute('class', '');
        });
        var parent = ev.target.parentElement || ev.target.parentNode;
        parent.setAttribute('class', 'selected');
        circle.setAttribute('transform', parent.getAttribute('transform'));
      }
    })();
  </script>

  <script src="{{page.include_prefix}}material.min.js"></script>
</body>
</html>
